<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ETF Analytics Dashboard</title>
    <link rel="stylesheet" href="css/style.css?v=2024.01.15">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns/dist/chartjs-adapter-date-fns.bundle.min.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>ETF Analytics Dashboard</h1>
            <p class="subtitle">Track ETF price evolution with 52-week highs/lows and entry points from 52 week high</p>
        </header>

        <main>
            <!-- ETF Selector -->
            <div class="controls">
                <div class="selector-group">
                    <label for="etf-selector">Select ETF:</label>
                    <select id="etf-selector">
                        <option value="">Loading ETFs...</option>
                    </select>
                </div>
                <div class="info-panel" id="etf-info">
                    <div class="info-item">
                        <span class="label">Name:</span>
                        <span class="value" id="etf-name">-</span>
                    </div>
                    <div class="info-item">
                        <span class="label">Ticker:</span>
                        <span class="value" id="etf-ticker">-</span>
                    </div>
                    <div class="info-item">
                        <span class="label">ISIN:</span>
                        <span class="value" id="etf-isin">-</span>
                    </div>
                </div>
                <div class="selector-group">
                    <label for="time-filter">Time Range:</label>
                    <select id="time-filter">
                        <option value="1m" selected>1 Month</option>
                        <option value="3m">3 Months</option>
                        <option value="1y">1 Year</option>
                        <option value="2y">2 Years</option>
                        <option value="3y">3 Years</option>
                        <option value="all">All Time</option>
                    </select>
                </div>
                <div class="selector-group">
                    <label for="currency-selector">Currency:</label>
                    <select id="currency-selector">
                        <!-- Currency options will be populated dynamically by JavaScript -->
                    </select>
                </div>
            </div>

            <!-- Chart Metrics Controls -->
            <div class="chart-metrics-controls">
                <h4>Chart Metrics:</h4>
                <div class="chart-toggles">
                    <label class="toggle-label">
                        <input type="checkbox" id="show-52week-high" checked>
                        <span>52-Week High</span>
                    </label>
                    <label class="toggle-label">
                        <input type="checkbox" id="show-52week-low" checked>
                        <span>52-Week Low</span>
                    </label>
                    <label class="toggle-label">
                        <input type="checkbox" id="show-thresholds">
                        <span>Entry Points</span>
                    </label>
                </div>
            </div>

            <!-- Chart Container -->
            <div class="chart-container">
                <canvas id="priceChart"></canvas>
                <div class="chart-navigation">
                    <div class="time-slider-container">
                        <div class="slider-wrapper">
                            <input type="range" id="time-slider" min="0" max="100" value="100" class="time-slider">
                            <div class="slider-labels">
                                <span class="start-date" id="start-date">-</span>
                                <span class="current-date" id="current-date">-</span>
                                <span class="end-date" id="end-date">-</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Metrics Panel -->
            <div class="metrics-panel" id="metrics-panel">
                <div class="metrics-grid">
                    <div class="metric-card">
                        <h3>52-Week High</h3>
                        <div class="metric-value" id="high-52week">-</div>
                        <div class="metric-date" id="high-date">-</div>
                    </div>
                    <div class="metric-card">
                        <h3>52-Week Low</h3>
                        <div class="metric-value" id="low-52week">-</div>
                        <div class="metric-date" id="low-date">-</div>
                    </div>
                </div>
                
                <div class="thresholds-section">
                    <h3>Entry Points from 52-Week High</h3>
                    <div class="thresholds-grid" id="thresholds-grid">
                        <!-- Threshold cards will be populated by JavaScript -->
                    </div>
                </div>
                
                <div class="profit-targets-section">
                    <h3>Profit Targets from Entry Points</h3>
                    <div class="profit-targets-filter">
                        <label for="threshold-filter">Select Entry Point:</label>
                        <select id="threshold-filter">
                            <option value="">Choose an entry point...</option>
                        </select>
                        <button id="clear-filter" class="clear-filter-btn">Clear</button>
                    </div>
                    <div class="profit-targets-grid" id="profit-targets-grid">
                        <!-- Profit target cards will be populated by JavaScript -->
                    </div>
                </div>
            </div>

            <!-- Loading Indicator -->
            <div class="loading" id="loading">
                <div class="spinner"></div>
                <p>Loading ETF data...</p>
            </div>

            <!-- Error Message -->
            <div class="error-message" id="error-message" style="display: none;">
                <p>Error loading data. Please try again later.</p>
            </div>
        </main>

        <footer>
            <p>This is an independent open data visualization project. Data is sourced from publicly available information.</p>
        </footer>
    </div>

    <script src="js/app.js"></script>
</body>
</html>